{"ast":null,"code":"import { Espectador } from 'src/app/models/espectador';\nimport { Ticket } from 'src/app/models/ticket';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/ticket.service\";\nimport * as i2 from \"src/app/services/espectador.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction TicketFormComponent_option_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const e_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", e_r1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(e_r1.nombre);\n  }\n}\nexport class TicketFormComponent {\n  constructor(servicio, espService, activatedRoute) {\n    this.servicio = servicio;\n    this.espService = espService;\n    this.activatedRoute = activatedRoute;\n    this.accion = \"\";\n    this.ticket = new Ticket();\n    this.espectadores = new Array();\n  }\n  ngOnInit() {\n    this.activatedRoute.params.subscribe(params => {\n      if (params['id'] == \"0\") {\n        this.accion = \"new\";\n        this.cargarEspectadores();\n      } else {\n        this.accion = \"update\";\n        this.cargarEspectadores();\n        this.cargarTicket(params['id']);\n      }\n    });\n  }\n  cargarTicket(id) {\n    this.servicio.getTicket(id).subscribe(result => {\n      console.log(result);\n      Object.assign(this.ticket, result);\n    }, error => {});\n  }\n  guardarTicket() {\n    this.servicio.newTicket(this.ticket).subscribe(result => {\n      if (result.status == 1) alert(result.msg);\n    }, error => {\n      alert(error.msg);\n    });\n  }\n  cargarEspectadores() {\n    this.espService.getEspectadores().subscribe(result => {\n      result.forEach(element => {\n        let unEspectador = new Espectador();\n        Object.assign(unEspectador, element);\n        this.espectadores.push(unEspectador);\n        unEspectador = new Espectador();\n      });\n    }, error => {});\n  }\n  modificarTicket(ticket) {\n    this.servicio.editTicket(ticket).subscribe(result => {\n      alert(\"se modifico\");\n    });\n  }\n}\nTicketFormComponent.ɵfac = function TicketFormComponent_Factory(t) {\n  return new (t || TicketFormComponent)(i0.ɵɵdirectiveInject(i1.TicketService), i0.ɵɵdirectiveInject(i2.EspectadorService), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n};\nTicketFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TicketFormComponent,\n  selectors: [[\"app-ticket-form\"]],\n  decls: 28,\n  vars: 5,\n  consts: [[1, \"container\", \"col-5\"], [1, \"mb-3\"], [\"for\", \"iddni\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"iddni\", \"name\", \"dni\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"idprecio\", 1, \"form-label\"], [\"name\", \"espectador\", \"id\", \"id\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"l\"], [\"value\", \"e\"], [\"for\", \"idte\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"idprecio\", \"name\", \"tipoEspectador\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"idfc\", 1, \"form-label\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [3, \"ngValue\"]],\n  template: function TicketFormComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0)(1, \"div\", 1)(2, \"label\", 2);\n      i0.ɵɵtext(3, \"Precio Ticket\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"input\", 3);\n      i0.ɵɵlistener(\"ngModelChange\", function TicketFormComponent_Template_input_ngModelChange_4_listener($event) {\n        return ctx.ticket.precioTicket = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"div\", 1)(6, \"label\", 4);\n      i0.ɵɵtext(7, \"Categoria Espectador\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"select\", 5);\n      i0.ɵɵlistener(\"ngModelChange\", function TicketFormComponent_Template_select_ngModelChange_8_listener($event) {\n        return ctx.ticket.categoriaEspectador = $event;\n      });\n      i0.ɵɵelementStart(9, \"option\", 6);\n      i0.ɵɵtext(10, \"Local\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"option\", 7);\n      i0.ɵɵtext(12, \"Extranjero\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(13, \"div\", 1)(14, \"label\", 8);\n      i0.ɵɵtext(15, \"Fecha de Compra\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"input\", 9);\n      i0.ɵɵlistener(\"ngModelChange\", function TicketFormComponent_Template_input_ngModelChange_16_listener($event) {\n        return ctx.ticket.fechaCompra = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"div\", 1)(18, \"label\", 10);\n      i0.ɵɵtext(19, \"Espectador \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(20, \"select\", 5);\n      i0.ɵɵlistener(\"ngModelChange\", function TicketFormComponent_Template_select_ngModelChange_20_listener($event) {\n        return ctx.ticket.espectador = $event;\n      });\n      i0.ɵɵtemplate(21, TicketFormComponent_option_21_Template, 2, 2, \"option\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(22, \"br\")(23, \"br\");\n      i0.ɵɵelementStart(24, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function TicketFormComponent_Template_button_click_24_listener() {\n        return ctx.guardarTicket();\n      });\n      i0.ɵɵtext(25, \"Guardar\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function TicketFormComponent_Template_button_click_26_listener() {\n        return ctx.modificarTicket(ctx.ticket);\n      });\n      i0.ɵɵtext(27, \"Modificar\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.ticket.precioTicket);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.ticket.categoriaEspectador);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.ticket.fechaCompra);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.ticket.espectador);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.espectadores);\n    }\n  },\n  dependencies: [i4.NgForOf, i5.ɵNgNoValidate, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i5.DefaultValueAccessor, i5.NumberValueAccessor, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.NgModel, i5.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Espectador","Ticket","i0","TicketFormComponent","constructor","servicio","espService","activatedRoute","ticket","espectadores","Array","ngOnInit","params","subscribe","accion","cargarEspectadores","cargarTicket","id","getTicket","result","console","log","Object","assign","error","guardarTicket","newTicket","status","alert","msg","getEspectadores","forEach","element","unEspectador","push","modificarTicket","editTicket","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\patri\\Documents\\tp5-QuirogaPatricioAlejandro-backend\\frontend\\src\\app\\components\\ticket-form\\ticket-form.component.ts","C:\\Users\\patri\\Documents\\tp5-QuirogaPatricioAlejandro-backend\\frontend\\src\\app\\components\\ticket-form\\ticket-form.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Espectador } from 'src/app/models/espectador';\r\nimport { Ticket } from 'src/app/models/ticket';\r\nimport { EspectadorService } from 'src/app/services/espectador.service';\r\nimport { TicketService } from 'src/app/services/ticket.service';\r\n\r\n@Component({\r\n  selector: 'app-ticket-form',\r\n  templateUrl: './ticket-form.component.html',\r\n  styleUrls: ['./ticket-form.component.css']\r\n})\r\nexport class TicketFormComponent implements OnInit{\r\n\r\n  ticket!:Ticket;\r\n  accion:string=\"\";\r\n\r\n  espectadores! : Array<Espectador>;\r\n\r\n  constructor (private servicio:TicketService,private espService:EspectadorService, private activatedRoute: ActivatedRoute){\r\n    this.ticket = new Ticket();\r\n    this.espectadores = new Array<Espectador>();\r\n  }\r\n\r\nngOnInit():void{\r\n\r\n  this.activatedRoute.params.subscribe(params => {\r\n    if(params['id'] == \"0\"){\r\n      this.accion =\"new\";\r\n      this.cargarEspectadores();\r\n    }else {\r\n      this.accion = \"update\";\r\n      this.cargarEspectadores()\r\n      this.cargarTicket(params['id'])\r\n    }\r\n  });\r\n}\r\n\r\ncargarTicket(id : string){\r\n  this.servicio.getTicket(id).subscribe(\r\n    result=>{\r\n      console.log(result)\r\n      Object.assign(this.ticket,result);\r\n    },\r\n    error=>{\r\n\r\n    }\r\n  )\r\n}\r\n\r\nguardarTicket(){\r\n  this.servicio.newTicket(this.ticket).subscribe(\r\n    (result:any)=>{\r\n      if (result.status == 1)\r\n      alert(result.msg)\r\n    },\r\n    error=>{\r\n      alert(error.msg)\r\n    }\r\n  )\r\n}\r\n\r\ncargarEspectadores(){\r\nthis.espService.getEspectadores().subscribe(\r\n  result=>{\r\n    result.forEach((element:any) => {\r\n      let unEspectador = new Espectador();\r\n      Object.assign(unEspectador,element);\r\n      this.espectadores.push(unEspectador);\r\n      unEspectador = new Espectador();\r\n    });\r\n  },\r\n  error=>{\r\n\r\n  }\r\n)\r\n\r\n}\r\n\r\n\r\nmodificarTicket(ticket:Ticket){\r\n  this.servicio.editTicket(ticket).subscribe(\r\n    result =>{\r\n      alert(\"se modifico\")\r\n    }\r\n  )\r\n}\r\n\r\n}\r\n","<form class=\"container col-5\">\r\n    <div class=\"mb-3\">\r\n      <label for=\"iddni\" class=\"form-label\">Precio Ticket</label> \r\n      \r\n  \r\n      <input type=\"number\" class=\"form-control\" id=\"iddni\" [(ngModel)]=\"ticket.precioTicket\" name=\"dni\" >\r\n    </div>\r\n   \r\n    <div class=\"mb-3\">\r\n        <label for=\"idprecio\" class=\"form-label\">Categoria Espectador</label>\r\n        <select name=\"espectador\" id=\"id\" [(ngModel)]=\"ticket.categoriaEspectador\">\r\n            <option value=\"l\">Local</option>\r\n            <option value=\"e\">Extranjero</option>\r\n          </select>\r\n      </div>\r\n\r\n      <div class=\"mb-3\">\r\n        <label for=\"idte\" class=\"form-label\">Fecha de Compra</label>\r\n        <input type=\"text\" class=\"form-control\" id=\"idprecio\" [(ngModel)]=\"ticket.fechaCompra\" name=\"tipoEspectador\" >\r\n      </div>\r\n\r\n      <div class=\"mb-3\">\r\n        <label for=\"idfc\" class=\"form-label\">Espectador </label>\r\n       \r\n      </div>\r\n      <select name=\"espectador\" id=\"id\" [(ngModel)]=\"ticket.espectador\">\r\n        <option *ngFor=\" let e of espectadores\" [ngValue]=\"e\">{{e.nombre}}</option>\r\n      </select>\r\n    \r\n   \r\n    <br>\r\n    <br>\r\n\r\n    <button  type=\"submit\"  class=\"btn btn-primary\" (click)=\"guardarTicket()\">Guardar</button>\r\n    \r\n    <button  type=\"submit\"  class=\"btn btn-primary\" (click)=\"modificarTicket(ticket)\">Modificar</button>\r\n \r\n</form>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}